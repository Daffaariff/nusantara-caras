<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nusantara CaRas ‚Äî Cultural Medical Intelligence (POC)</title>
  <meta name="description" content="POC site for Nusantara CaRas: culturally aware medical AI for Indonesia using SEA‚ÄëLION (front) + MedGEMMA (back) with self‚Äëevolving RAG." />
  <meta property="og:title" content="Nusantara CaRas ‚Äî Cultural Medical Intelligence (POC)" />
  <meta property="og:description" content="SEA‚ÄëLION + MedGEMMA with self‚Äëevolving RAG to expand diagnostic access for Sundanese & Javanese communities." />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1020; --panel:#0f172a; --muted:#94a3b8; --text:#e2e8f0; --accent:#22d3ee; --ring:#38bdf8;
      --card:#0b132b; --border:#1f2937;
    }
    *{box-sizing:border-box}
    html,body{margin:0; padding:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; background:var(--bg); color:var(--text);}
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1100px; margin:0 auto; padding:24px}
    header{position:sticky; top:0; backdrop-filter:saturate(120%) blur(6px); background:rgba(11,16,32,.7); border-bottom:1px solid var(--border); z-index:50}
    nav{display:flex; align-items:center; justify-content:space-between; gap:16px}
    .brand{display:flex; align-items:center; gap:10px; font-weight:700}
    .brand .dot{width:10px; height:10px; border-radius:100%; background:linear-gradient(135deg,#22d3ee,#38bdf8)}
    .navlinks a{margin:0 10px; font-weight:600}
    .hero{display:grid; grid-template-columns:1.1fr .9fr; gap:28px; align-items:center; padding:48px 0}
    .card{background:linear-gradient(180deg,rgba(34,211,238,.07),rgba(34,211,238,0)); border:1px solid var(--border); border-radius:18px; padding:24px; box-shadow:0 10px 30px rgba(0,0,0,.25)}
    .eyebrow{display:inline-block; padding:4px 10px; border:1px solid var(--border); border-radius:999px; color:var(--muted); font-size:12px; letter-spacing:.08em; text-transform:uppercase}
    h1{font-size:40px; line-height:1.1; margin:16px 0}
    p.lead{font-size:18px; color:var(--muted)}
    .cta{display:flex; gap:12px; margin-top:18px}
    .btn{display:inline-flex; align-items:center; gap:10px; padding:12px 16px; border-radius:12px; font-weight:700; border:1px solid var(--border); background:#0d1b2a}
    .btn.primary{background:linear-gradient(135deg,#22d3ee,#38bdf8); color:#001018; border:none}
    .grid{display:grid; gap:20px}
    .grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
    .grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    section{padding:40px 0}
    h2{font-size:26px; margin:0 0 12px}
    .tag{display:inline-block; font-size:12px; color:var(--muted); border:1px dashed var(--border); padding:4px 8px; border-radius:8px; margin-right:6px}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace; font-size:12px; background:#0b132b; border:1px solid var(--border); padding:2px 6px; border-radius:6px}
    figure{margin:0}
    figure img{width:100%; border-radius:14px; border:1px solid var(--border); display:block}
    figcaption{color:var(--muted); font-size:13px; margin-top:8px}
    .list{margin:0; padding-left:18px}
    .list li{margin:6px 0}
    footer{border-top:1px solid var(--border); color:var(--muted); padding:28px 0; font-size:14px}
    @media (max-width:980px){ .hero{grid-template-columns:1fr} .navlinks{display:none} }
    .flow-block {
      margin-top: 50px;
      margin-bottom: 20px; /* adjust spacing as needed */
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <nav>
        <div class="brand"><span class="dot"></span> Nusantara CaRas</div>
        <div class="navlinks">
          <a href="#problem">Problem</a>
          <a href="#solution">Solution</a>
          <a href="#architecture">Architecture</a>
          <a href="#demo">Demo</a>
          <a href="#future">Future Improvements</a>
        </div>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="card">
        <span class="eyebrow">POC ‚Äî Nusantara CaRas (Cageur and waRas)</span>
        <h1>SEA‚ÄëLION √ó MedGEMMA with Self‚ÄëEvolving RAG</h1>
        <p class="lead">Expanding diagnostic access for <strong>Sundanese</strong> & <strong>Javanese</strong> speakers with a culturally fluent intake frontend and medically grounded backend.</p>
        <div class="cta">
          <a class="btn primary" href="#demo">See POC / Links</a>
          <a class="btn" href="#problem">Why this matters</a>
        </div>
      </div>
      <div class="card">
        <h3>Project One‚ÄëPager</h3>
        <p><strong>Indonesia:</strong> ~270M population with ~1 doctor per 2,500 patients. Western‚Äëtrained medical AI often misses local language & cultural nuance. <strong>Nusantara CaRas</strong> builds a native experience with SEA‚ÄëLION for intake and MedGEMMA for diagnosis, guided by a self‚Äëevolving RAG system.</p>
        <div style="margin-top:8px">
          <span class="tag">SEA‚ÄëLION</span>
          <span class="tag">MedGEMMA</span>
          <span class="tag">RAG</span>
          <span class="tag">Guardrails</span>
        </div>
      </div>
    </section>

    <section id="problem">
      <h2>Problem</h2>
      <div class="grid cols-2">
        <div class="card">
          <h3>Care Capacity Gap</h3>
          <ul class="list">
            <li>~1 doctor for every 2,500 patients leads to long delays and limited access.</li>
            <li>Underserved communities in West & Central Java often lack culturally adapted support.</li>
          </ul>
        </div>
        <div class="card">
          <h3>Model‚ÄìCulture Mismatch</h3>
          <ul class="list">
            <li>Most medical AIs are tuned on Western data and fail to handle <em>code‚Äëswitching</em> & local idioms.</li>
            <li>Users need safe triage with local norms & language (Sundanese/Javanese).</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="solution">
  <h2>Solution</h2>
  <div class="grid cols-2">
    <div class="card">
      <h3>SEA-LION Frontend</h3>
      <ul class="list">
        <li>Native intake in Sundanese and Javanese with strict local-language consistency</li>
        <li>Emergency triage with culturally appropriate prompts</li>
      </ul>
    </div>

    <div class="card">
      <h3>MedGEMMA Backend</h3>
      <ul class="list">
        <li>Diagnosis support and guideline grounding via RAG</li>
        <li>Guardrails for scope and safety with drug-interaction checks</li>
      </ul>
    </div>
  </div>

  <div class="grid cols-2" style="margin-top:16px">
    <div class="card">
      <h3>Self-Evolving RAG</h3>
      <ul class="list">
        <li>Uses patient follow-up feedback to continuously improve retrieval</li>
        <li>Stores confirmed cases in vector DB for reuse on similar conditions</li>
      </ul>
    </div>

    <div class="card">
      <h3>Accessibility & Safety</h3>
      <ul class="list">
        <li>Lightweight, offline-ready SEA-LION for low-connectivity regions</li>
        <li>Red-flag detection and automatic escalation to emergency care</li>
      </ul>
    </div>
  </div>
</section>


    <section id="architecture">
      <h2>Architecture</h2>
      <div class="card">
        <figure>
          <!-- Put your flow image in /source/assets/caras-flow.png -->
          <img src="source/assets/caras-flow.png" alt="Nusantara CaRas ‚Äî System Flow" />
          <figcaption>SEA‚ÄëLION intake with safety triage ‚Üí MedGEMMA backend via RAG ‚Üí feedback loop for continuous improvement.</figcaption>
        </figure>
      </div>
      <div class="grid cols-3" style="margin-top:16px">
        <div class="card">
          <h3>Intake (SEA‚ÄëLION)</h3>
          <ul class="list">
            <li>Cultural NLU for Sundanese/Javanese</li>
            <li>Emergency triage & hospital suggestions (maps)</li>
          </ul>
        </div>
        <div class="card">
          <h3>Reasoning (MedGEMMA)</h3>
          <ul class="list">
            <li>Guideline‚Äëaware differential prompts</li>
            <li>Drug interactions ‚Ä¢ CDSS hooks</li>
          </ul>
        </div>
        <div class="card">
          <h3>RAG & Guardrails</h3>
          <ul class="list">
            <li>Retriever tuned on Indonesian sources</li>
            <li>Policy guardrails & audit logging</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="demo">
  <h2>POC Links & Screenshots</h2>

  <div class="card">
    <ul class="list">
      <li><strong>Demo (sundanese prototype):</strong> <a href="https://huggingface.co/spaces/Daffa19/Nusantara-caras" target="_blank" rel="noopener">link-here</a></li>
      <li><strong>API SEA-LION:</strong> <a href="https://docs.sea-lion.ai/guides/inferencing/api" target="_blank" rel="noopener">link-here</a></li>
      <li><strong>Model cards:</strong> <a href="https://huggingface.co/aisingapore/Gemma-SEA-LION-v3-9B-IT" target="_blank" rel="noopener">SEA-LION</a> ‚Ä¢ <a href="https://huggingface.co/google/medgemma-4b-it" target="_blank" rel="noopener">MedGEMMA</a></li>
      <li><strong>guidelines (RAG):</strong> <a href="https://arxiv.org/abs/2405.02957" target="_blank" rel="noopener">links-here</a></li>
    </ul>
  </div>

  <h2 class="flow-block">SEA-LION Intake flow</h2>
  <p class="lead">The intake process is designed to be culturally fluent and user-friendly, to gather structured information of user condition. then will be forwaded in english to the MedGEMMA backend for diagnosing user condition.</p>
  <div style="margin-top:16px">
        <figure class="card">
          <img src="source/assets/openerr.png" alt="SEA‚ÄëLION intake screenshot 1" />
          <figcaption><strong>Step 1 ‚Äî Intake & Safety Triage.</strong> SEA‚ÄëLION greets in Sundanese/Javanese, confirms non‚Äëemergency, acknowledges AI, and secures user consent.</figcaption>
        </figure>
        <figure class="card">
          <img src="source/assets/some-info.png" alt="SEA‚ÄëLION intake screenshot 2" />
          <figcaption><strong>Step 2 ‚Äî Structured History.</strong> The bot gathers chief complaint and HPI (onset, location, duration, character, aggravating/alleviating factors, radiation, timing, severity).</figcaption>
        </figure>
        <figure class="card">
          <img src="source/assets/closer.png" alt="SEA‚ÄëLION intake screenshot 3" />
          <figcaption><strong>Step 3 ‚Äî Wrap‚Äëup & Confirmation.</strong> Review of systems, past medical history, and meds/allergies are captured; the user confirms before JSON is emitted.</figcaption>
        </figure>
      </div>

  <div class="card" style="margin-top:16px">
    <h4 style="margin-top:0">Target JSON Output</h4>
    <pre style="white-space:pre-wrap; background:#0b132b; border:1px solid var(--border); padding:16px; border-radius:12px; overflow:auto;">
{
  "tool": "medical_intake",
  "arguments": {
    "consent": {
      "terms_agreed": true,
      "is_emergency": false,
      "acknowledges_ai": true
    },
    "chief_complaint": "Toothache",
    "history_present_illness": {
      "onset": "3 days ago upon waking",
      "location": "Backteeth",
      "duration": "Intermittent, lasting minutes to hours",
      "character": "Like being pressed with pulsating sensation",
      "aggravating_factors": "cold water",
      "alleviating_factors": "warm water",
      "radiation": "None",
      "timing": "Worse in the morning",
      "severity": 6
    },
    "review_of_systems": {
      "general": [],
      "heent": [],
      "respiratory": [],
      "gastrointestinal": [],
      "musculoskeletal": []
    },
    "past_medical_history": {
      "chronic_illnesses": ["Hypertension"],
      "past_surgeries": null,
      "hospitalizations": null
    },
    "medications_and_allergies": {
      "current_medications": [
        {
          "name": "Amlodipine",
          "type": "prescription"
        }
      ],
      "allergies": []
    }
  }
}


    </pre>
    <p class="lead">This JSON is posted to the MedGEMMA backend (with RAG + guardrails) for guideline-grounded reasoning.</p>
  </div>

  <h2 class="flow-block">MedGEMMA Backend Flow</h2>
  <p class="lead">The backend processes the intake JSON, retrieves relevant guidelines, and generates a structured response with differential diagnoses, recommended actions, and safety checks.</p>
  <div style="margin-top:16px">
        <ul class="list">
          <li>Receives intake JSON from SEA‚ÄëLION + historical illnese of user based on history (self-RAG)</li>
          <li>if necessary the MedGEMMA would use the tools/base knowlege to generate the response </li>
          <li>Retrieves relevant guidelines using RAG.</li>
          <li>Generates differential diagnoses and recommended actions.</li>
          <li>Checks for drug interactions and safety issues.</li>
          <li>Returns structured response to SEA‚ÄëLION for user feedback.</li>
        </ul>

    <h4 style="margin-top:2">example backend JSON Output</h4>
        <pre style="white-space:pre-wrap; background:#0b132b; border:1px solid var(--border); padding:16px; border-radius:12px; overflow:auto;">
{
    "diagnosis": "Pulpitis",
    "hypothesis": "The patient is likely experiencing pulpitis, which is inflammation of the dental pulp, possibly due to caries or irritation, leading to intermittent pain exacerbated by cold stimuli and relieved by warmth. This could also indicate a dental abscess if there is an associated infection.",
    "history_and_examination_findings": "The patient presents with a toothache that started 3 days ago, localized to the back teeth, characterized as a pressing, pulsating sensation. The pain is intermittent, lasting from minutes to hours, worsens in the morning, and is aggravated by cold water while alleviated by warm water. Severity is rated as 6 on a pain scale.",
    "investigation_plan": "A dental examination is necessary, including visual inspection for caries, percussion testing for sensitivity, and possibly radiographs to assess for abscess formation or pulp involvement.",
    "management_plan": "If diagnosed with pulpitis, options include restorative treatment such as fillings or possibly root canal therapy. If an abscess is present, appropriate antibiotics and drainage may be required.",
    "prognosis": "With timely dental intervention, the prognosis is generally good. However, untreated pulpitis can progress to more severe complications, including tooth loss.",
    "doctors_prescription": "Prescription for analgesics (e.g., ibuprofen) for pain management and, if an abscess is identified, antibiotics such as amoxicillin or clindamycin depending on patient allergy history.",
    "summary": "A patient presents with a 3-day history of intermittent toothache localized to the back teeth, characterized by a pulsating sensation, worsened by cold and improved by warm stimuli. The clinical suspicion includes pulpitis or possibly a dental abscess."
}
    </pre>
  </div>

    <!-- SEA-LION Frontend Flow ‚Äî Localized Response -->

<h2 class="flow-block">SEA-LION Frontend Flow (Post-Backend)</h2>
<p class="lead">
  After the backend (MedGEMMA + RAG) returns the analysis JSON, <strong>SEA-LION</strong> renders
  the response into a localized patient-friendly format (Sundanese/Javanese). An example of the
  rendered output is shown below.
</p>

    <article>
      <h3>ü¶∑ Laporan Kas√©hatan Anjeun</h3>
      <p><strong>Hatur nuhun tos ngantosan, ieu diagonos sareng anjuran ti dokter:</strong></p>
      <hr style="border:0;border-top:1px solid var(--border)">

      <h4>üìã Gejala &amp; Kaayaan</h4>
      <p>
        Anjeun parantos ngalaman nyeri huntu kira-kira <strong>3 dinten</strong>. Lokasina di huntu tukang,
        karasana <strong>denyut jeung diteken</strong>, datangna henteu tetep, tiasa sababaraha menit dugi sababaraha jam.
        Nyeri langkung karasa <strong>isuk-isuk</strong>, beuki nyeri lamun kena <strong>cai tiis</strong>, sareng rada
        hampang ku <strong>cai haneut</strong>. Skala nyeri anjeun ayeuna sakitar <strong>6 tina 10</strong>.
      </p>

      <h4>ü©∫ Diagnosis &amp; Pamanggih Dokter</h4>
      <ul class="list">
        <li><strong>Pulpitis</strong> ‚Üí radang dina s√©lip huntu kusabab karies atanapi iritasi.</li>
        <li><strong>Abses huntu</strong> ‚Üí upami aya inf√©ksi anu nyertai.</li>
      </ul>

      <h4>üîç Rencana Pamariksaan</h4>
      <ul class="list">
        <li>Pamariksaan langsung huntu pikeun ningali karies.</li>
        <li>T√©s sensitipitas ku diketok huntu.</li>
        <li>Rontgen pikeun ningali naha aya abses atanapi karusakan jero.</li>
      </ul>

      <h4>üíä Rencana Pangobatan</h4>
      <ul class="list">
        <li><strong>Upami pulpitis:</strong> tambalan atanapi perawatan saluran akar.</li>
        <li><strong>Upami aya abses:</strong> antibiotik sareng tindakan pikeun ngaleupaskeun nanah.</li>
        <li>Kanggo nyeri ayeuna: tiasa nganggo <strong>obat nyeri (misalna ibuprofen)</strong> sasuai dosis dokter.</li>
      </ul>

      <h4>üìà Kasempetan Cageur</h4>
      <p>
        Lamun gancang diubaran, kasempetan cageurna sa√© pisan. Nanging, lamun teu diubaran, pulpitis tiasa janten langkung parna
        sareng ngakibatkeun <strong>leungitna huntu</strong>.
      </p>

      <h4>üìù Resep Dokter</h4>
      <ul class="list">
        <li><strong>Obat nyeri</strong>: ibuprofen (gumantung kana dosis &amp; kondisi anjeun).</li>
        <li><strong>Antibiotik</strong>: amoxicillin atanapi clindamycin (lamun aya tanda inf√©ksi, og√© gumantung kana riwayat alergi).</li>
      </ul>

      <h4>üè• Rumah Sakit / Apotek Nu Disarankeun</h4>
      <ul class="list">
        <li>üè• <strong>RSUD Kota Bandung</strong> ‚Äì Jl. Rumah Sakit No.22, Kota Bandung.</li>
        <li>üè• <strong>RS Gigi dan Mulut Unpad</strong> ‚Äì Jl. Sekeloa Selatan No.1, Bandung.</li>
        <li>üíä <strong>Apotek Kimia Farma Dago</strong> ‚Äì Jl. Ir. H. Juanda No.60, Bandung.</li>
      </ul>

      <h4>üôè Kasimpulan</h4>
      <p>
        Mangga enggal konsultasi deui ka dokter gigi pikeun perlakuan anu langkung pas.
        Simkuring ngiring mendoakeun anjeun <strong>enggal cageur sareng langkung nyaman</strong>.
      </p>

      <p class="kbd" style="display:inline-block">
        ‚ö†Ô∏è Catetan Penting: Ieu mangrupikeun laporan tina dokter. Mangga tetep nuturkeun pituduh dokter gigi anjeun.
      </p>
    </article>
  </div>


  <!-- Dev Notes: How SEA-LION maps backend JSON -> localized UI -->
  <div class="card">
  <h3 style="margin-top:0">Notes ‚Äî Mapping Backend JSON ‚Üí UI</h3>
  <ul class="list">
    <li><strong>Input:</strong> Backend JSON (diagnosis, hypothesis, plans, prescription, summary, etc.).</li>
    <li><strong>Localization:</strong> SEA-LION translates and adapts the content into local languages (Sundanese/Javanese) and cultural context (greetings, word choices).</li>
    <li><strong>Rendering:</strong> Uses card and list components to structure the content, adding icons/emoji for readability.</li>
    <li><strong>Safety:</strong> Inserts disclaimers and guardrails (without replacing professional medical advice).</li>
    <li><strong>Optional:</strong> Integrates maps/local services to suggest nearby hospitals and pharmacies based on patient location.</li>
  </ul>
</div>


    <h4 style="margin-bottom:8px">Pseudo-code</h4>
    <pre style="white-space:pre-wrap; background:#0b132b; border:1px solid var(--border); padding:12px; border-radius:12px; overflow:auto;">
const localized = localizeFromBackendJson(backendJson, { locale: "su-ID" });
renderReport(localized, {
  sections: ["symptoms", "dx", "investigations", "management", "prognosis", "rx", "facilities", "summary"],
  safety: true,
  withMapLinks: true
});
    </pre>
  </div>
</div>

<!-- Self-Evolving RAG ‚Äî Patient Feedback Loop -->
<h2 class="flow-block">Self-Evolving RAG (Patient Feedback ‚Üí Vector DB ‚Üí Future Recall)</h2>
<p class="lead">
  One week (this can be adjusted) after the initial guidance, the patient receives a short check-in. Their feedback (symptom resolution,
  confirmed diagnosis, treatment taken, outcomes) is normalized and stored as embeddings in a vector database.
  Future cases with similar presentations can retrieve this feedback to improve grounding and recommendations.
</p>

<div class="grid cols-3" style="margin-top:16px">
  <div class="card">
    <h3 style="margin-top:0">1) Patient Check-in</h3>
    <ul class="list">
      <li>SEA-LION sends a 1-week follow-up (chat/SMS/WhatsApp).</li>
      <li>Collects: outcome (resolved/not), confirmed diagnosis, meds taken, adverse effects, free-text notes.</li>
      <li>De-identifies PII before storage; keeps minimal linkage (hashed episode ID).</li>
    </ul>
  </div>

  <div class="card">
    <h3 style="margin-top:0">2) Outcome Labeling</h3>
    <ul class="list">
      <li>Label: <em>diagnosis_success</em> (true/false/unknown).</li>
      <li>Quality tags: guideline_adherence, side_effects, followup_needed.</li>
      <li>Auto-score similarity between original HPI & confirmed diagnosis.</li>
    </ul>
  </div>

  <div class="card">
    <h3 style="margin-top:0">3) Vectorize & Upsert</h3>
    <ul class="list">
      <li>Build a concise ‚Äúcase card‚Äù text (HPI ‚Üí DX ‚Üí RX ‚Üí Outcome).</li>
      <li>Create embedding and <strong>upsert</strong> to Vector DB with metadata.</li>
      <li>Backend retrieval uses filters (locale, region, specialty, recency) and re-ranks.</li>
    </ul>
  </div>
</div>

<div class="grid cols-2" style="margin-top:16px">
  <div class="card">
    <h3 style="margin-top:0">Feedback Payload (Example)</h3>
    <pre style="white-space:pre-wrap; background:#0b132b; border:1px solid var(--border); padding:12px; border-radius:12px; overflow:auto;">
{
  "episode_id": "ep_9b1f...e7c",
  "patient_locale": "su-ID",
  "initial": {
    "chief_complaint": "Toothache",
    "hpi": {
      "onset": "3 days",
      "location": "posterior teeth",
      "aggravating": "cold water",
      "relieving": "warm water",
      "severity": 6
    },
    "provisional_dx": ["pulpitis", "dental abscess"],
    "plan": ["analgesic", "dental x-ray", "consider RCT"]
  },
  "followup_after_days": 7,
  "feedback": {
    "diagnosis_success": true,
    "confirmed_dx": "pulpitis",
    "treatment_taken": ["ibuprofen", "root canal therapy"],
    "outcome_summary": "Pain resolved within 3 days after RCT.",
    "adverse_effects": [],
    "notes": "Prompt referral helped reduce pain quickly."
  },
  "privacy": { "pii_removed": true }
}
    </pre>
  </div>

  <div class="card">
    <h3 style="margin-top:0">Backend Use (Pseudo-code)</h3>
    <pre style="white-space:pre-wrap; background:#0b132b; border:1px solid var(--border); padding:12px; border-radius:12px; overflow:auto;">
// Upsert feedback case
const caseCard = toCaseCardText(payload);     // HPI ‚Üí DX ‚Üí RX ‚Üí Outcome
const emb = embed(caseCard);
vectorDB.upsert({
  id: payload.episode_id,
  embedding: emb,
  metadata: {
    locale: payload.patient_locale,
    confirmed_dx: payload.feedback.confirmed_dx,
    diagnosis_success: payload.feedback.diagnosis_success,
    recency_days: payload.followup_after_days
  }
});

// Retrieval in future similar cases
const queryCard = toCaseQueryText(currentPatientIntakeJson);
const qEmb = embed(queryCard);
const neighbors = vectorDB.search(qEmb, {
  topK: 10,
  filter: { locale: "su-ID" }
});
const groundedContext = rerankAndSummarize(neighbors);
const finalAnswer = medGEMMA.generate({
  intakeJson: currentPatientIntakeJson,
  retrievedContext: groundedContext,
  guardrails: true
});
    </pre>
  </div>
</div>

<div class="card" style="margin-top:16px">
  <h3 style="margin-top:0">Governance & Safety</h3>
  <ul class="list">
    <li>De-identify feedback, store only minimal episode linkage.</li>
    <li>Opt-in consent at intake; opt-out available at any time.</li>
    <li>Bias checks: avoid over-weighting single-region outcomes; use recency decay.</li>
    <li>Audit trails for retrievals influencing recommendations.</li>
  </ul>
</div>

</section>

<!-- Possible Future Improvements -->
<section id="future">
  <h2>Possible Future Improvements</h2>

  <div class="grid cols-2">
    <div class="card">
      <h3>Language Consistency</h3>
      <ul class="list">
        <li>Guarantee fully localized outputs without fallback to English</li>
        <li>Schema-based outputs to prevent bilingual drift</li>
        <li>Few-shot examples to enforce style consistency</li>
      </ul>
    </div>

    <div class="card">
      <h3>Self-RAG Feedback Loop</h3>
      <ul class="list">
        <li>Use patient follow-up outcomes to strengthen retrieval</li>
        <li>Store confirmed cases in vector DB for future reuse</li>
        <li>Continuously improve diagnostic grounding</li>
      </ul>
    </div>
  </div>

  <div class="grid cols-2" style="margin-top:16px">
    <div class="card">
      <h3>On-Device & Offline Modes</h3>
      <ul class="list">
        <li>Lightweight SEA-LION models for low-end Android devices</li>
        <li>Store-and-forward for poor connectivity regions</li>
      </ul>
    </div>

    <div class="card">
      <h3>Safety & Guardrails</h3>
      <ul class="list">
        <li>Red-flag detection and emergency escalation paths</li>
        <li>Automatic guardrails for unsafe or uncertain outputs</li>
      </ul>
    </div>
  </div>
</section>

    <section id="impact">
      <h2>Impact</h2>
      <div class="grid cols-2">
        <div class="card">
          <h3>For Communities</h3>
          <ul class="list">
            <li>Faster intake & guidance in native languages.</li>
            <li>Culturally resonant safety instructions.</li>
          </ul>
        </div>
        <div class="card">
          <h3>For Clinicians & NGOs</h3>
          <ul class="list">
            <li>Structured hand‚Äëoffs from intake to care providers.</li>
            <li>Audit trails, metrics, and guardrail policy views.</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="contact">
      <h2>Contact</h2>
      <div class="card">
        <p>if you have any questions, please contact our representative team member: <a href="mailto:daffaarifadilah@gmail.com">daffaarifadilah@gmail.com</a></p>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">¬© <span id="y"></span> Nusantara CaRas ‚Äî POC. Created by Abe's Team</div>
  </footer>
  <script>document.getElementById('y').textContent = new Date().getFullYear()</script>
</body>
</html>
